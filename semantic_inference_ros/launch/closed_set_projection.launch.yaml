---
launch:
  # Segmentation configuration
  - arg:
      name: model_name
      # Other model options:
      # - ade20k-hrnetv2-c1
      # - ade20k-mobilnetv2dilated-c1_deepsup
      default: ade20k-efficientvit_seg_l2
      description: >
        Model to use (typically the filename without the .onnx extension).
        Can be specified as an absolute path, but requires settings 'model_config' to the correct filepath.
  - arg: {name: model_config, default: $(find-pkg-share semantic_inference_ros)/config/models/$(var model_name).yaml, description: Model-specific configuration}
  - arg: {name: use_prerecorded, default: 'false', description: Remap prerecorded labels}
  - arg: {name: force_rebuild, default: 'false', description: Force TensorRT to rebuild engine}
  # Run options
  - arg: {name: debug, default: 'false', description: Run with GDB}
  - arg: {name: verbose, default: 'true', description: Disable console logging if false}
  # Input configuration
  - arg: {name: compressed_rgb, default: 'false', description: Triggers decompression for RGB stream}
  - arg: {name: rgb_image_transport, default: $(if $(var compressed_rgb) 'compressed' 'raw')}
  - arg: {name: max_image_queue_size, default: '1', description: Max number of images to store}
  - arg: {name: min_separation_s, default: '0.0', description: Time separation between inputs}
  - arg: {name: rotation_type, default: none, description: Input camera rotation}
  # Colormap and label grouping
  - arg: {name: labelspace_name, default: ade20k_mp3d, description: Label remapping configuration}
  - arg: {name: colormap_path, default: $(find-pkg-share semantic_inference_ros)/config/distinct_150_colors.csv, description: Visualization colormap}
  - include: {file: $(find-pkg-share semantic_inference_ros)/launch/closed_set.launch.yaml}
  - node:  # 2D semantic segmentation
      pkg: semantic_inference_ros
      exec: backprojection_node
      name: semantic_projector
      on_exit: shutdown
      remap:
        - {from: labels, to: semantic/image_raw}
      args: >
        --config-utilities-yaml {colormap_path: $(var colormap_path)}
